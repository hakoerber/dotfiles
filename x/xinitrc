#!/bin/bash

if [ -d /etc/X11/xinit/xinitrc.d ]; then
  for f in /etc/X11/xinit/xinitrc.d/*; do
    [ -x "$f" ] && . "$f"
  done
  unset f
fi

[ -f /etc/xprofile ] && source /etc/xprofile
[ -f ~/.xprofile ] && source ~/.xprofile


# keyboard options
keyboard_layout=de
keyboard_options= nodeadkeys
keyboard_repeat_delay=150
keyboard_repeat_speed=30

# execute the host-specific .xinitrc-addition
hostfile="$HOME/.xinitrc.d/$(hostname).xinitrc"
[[ -f "$hostfile" ]] && bash "$hostfile" &

# set keyboard layout
setxkbmap $keyboard_layout $keyboard_options

# set key repeat delay
xset r rate $keyboard_repeat_delay $keyboard_repeat_speed


case $1 in
*)
    SESSION_CONF=$(bash "$HOME/.i3/scripts/genconfig.bash")
    exec i3 -c "$SESSION_CONF"
    ;;
esac
